//--------------------------------------------------------------------------------
// Auto-generated by Migen (ea1eefe) & LiteX (05869be) on 2020-05-09 00:12:29
//--------------------------------------------------------------------------------
module top(
	input wire clk100,
	input wire clkslow,
	input wire button,
	output wire led
);

wire sys_clk;
reg sys_rst = 1'd0;
wire slow_clk;
reg slow_rst = 1'd0;
reg [1:0] button_d = 2'd0;
reg button_r = 1'd0;
reg rising_fast = 1'd0;
reg [25:0] counter = 26'd0;

assign sys_clk = clk100;
assign slow_clk = clkslow;
assign led = counter[25];

always @(posedge slow_clk) begin
	button_d[0] <= button;
	button_d[1] <= button_d;
	button_r <= ((~button_d[1]) & button_d[0]);
	if (slow_rst) begin
		button_d <= 2'd0;
		button_r <= 1'd0;
	end
end

always @(posedge sys_clk) begin
	rising_fast <= button_r;
	if (rising_fast) begin
		counter <= 1'd0;
	end else begin
		counter <= (counter + 1'd1);
	end
	if (sys_rst) begin
		rising_fast <= 1'd0;
		counter <= 26'd0;
	end
end

endmodule
